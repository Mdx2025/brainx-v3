#!/usr/bin/env bash
set -euo pipefail

ROOT="$(cd "$(dirname "$0")" && pwd)"

# Keep CLI output clean (dotenv@17 prints tips unless quiet)
export DOTENV_CONFIG_QUIET="${DOTENV_CONFIG_QUIET:-true}"

CMD="${1:-}"
shift || true

case "$CMD" in
  health)
    node "$ROOT/tests/smoke.js"
    ;;
  add|search|inject)
    node "$ROOT/lib/cli.js" "$CMD" "$@"
    ;;
  *)
    node "$ROOT/lib/cli.js" --help
    exit 1
    ;;
esac
